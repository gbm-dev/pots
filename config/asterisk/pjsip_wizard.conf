; Telnyx PJSIP Trunk - Credential-based authentication
; Env vars are substituted by entrypoint.sh at container start

[telnyx-out]
type = wizard
transport = transport-udp

; Outbound registration to Telnyx
sends_registrations = yes
remote_hosts = TELNYX_SIP_DOMAIN_PLACEHOLDER:5060

; Credential auth
sends_auth = yes
outbound_auth/username = TELNYX_SIP_USER_PLACEHOLDER
outbound_auth/password = TELNYX_SIP_PASS_PLACEHOLDER

; Accept inbound from Telnyx (for callbacks if needed)
accepts_registrations = no
accepts_auth = no

; Codec: force ulaw for modem compatibility
endpoint/allow = !all,ulaw
endpoint/dtmf_mode = rfc4733
endpoint/context = from-telnyx
endpoint/disallow = all
endpoint/allow = ulaw

; Jitter buffer for modem stability
endpoint/jiterbuffer = yes

; NAT/media settings
endpoint/rtp_symmetric = yes
endpoint/force_rport = yes
endpoint/rewrite_contact = yes
endpoint/direct_media = no

[transport-udp]
type = transport
protocol = udp
bind = 0.0.0.0:5060
